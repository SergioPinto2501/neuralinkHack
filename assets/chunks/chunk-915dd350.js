var y=Object.defineProperty;var f=(e,t,i)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var g=(e,t,i)=>(f(e,typeof t!="symbol"?t+"":t,i),i);import{r as m}from"./chunk-ef86a6e3.js";import{L as o}from"./chunk-e948ec12.js";const T=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",...e},m.createElement("circle",{cx:"50%",cy:"50%",r:"25%",stroke:"inherit",strokeWidth:1,fill:"none"}));function h(e=void 0){return{ok:!0,data:e}}function R(e=void 0,t=void 0){return{ok:!1,error:e,errorData:t}}const r={valid:h,invalid:R},u="https://patient-registry.clinical.neuralink.com",v={}.VITE_DISABLE_CAPTCHA!=="true",A="6LfBAMwiAAAAAJTsyQ5H_tQF2MEI7P1U6mxojL1d";function S(){let e="";return v&&(e=document.getElementById("g-recaptcha-response").value,!e)?r.invalid("missing_recaptcha"):r.valid(e)}const n=class n{static async _submitToPatientRegistry({url:t,data:i,useRecaptcha:l=!1}){let s="";if(l){const a=S();if(!a.ok)return r.invalid(a.error);s=a.data}const d={method:"POST",headers:{"Content-Type":"application/json","x-recaptcha-response":s},body:JSON.stringify(i)};try{const a=await fetch(t,d),c=await a.json();return a.ok?r.valid(c):(o.asSingleton().error(c.message),c.failed_keys?o.asSingleton().onServerValidationFailure(c.failed_keys):o.asSingleton().onServerError(c),r.invalid("submission_error",c))}catch(a){return o.asSingleton().error(a),r.invalid("communication_error")}}static async submitPatientRegistryConsentFormData(t){return n._submitToPatientRegistry({url:n.endpoints.patientRegistryConsent,data:t,useRecaptcha:!0})}static async submitPatientRegistrySubmissionFormData(t){return n._submitToPatientRegistry({url:n.endpoints.patientRegistrySubmission,data:t,useRecaptcha:!0})}static async submitMailingListFormData(t){return n._submitToPatientRegistry({url:n.endpoints.patientRegistryMailingList,data:t,useRecaptcha:!0})}static async checkVerification(t){try{const i=new URL(n.endpoints.patientRegistryCheckVerification);i.searchParams.append("verification_token",t);const l=await fetch(i),s=await l.json();return l.ok?r.valid(s):(o.asSingleton().error(s.message),o.asSingleton().onServerError(s),r.invalid("submission_error",s))}catch(i){return o.asSingleton().error(i),r.invalid("communication_error")}}};g(n,"endpoints",{patientRegistryMailingList:`${u}/mailing_list`,patientRegistryConsent:`${u}/consent`,patientRegistrySubmission:`${u}/submission`,patientRegistryCheckVerification:`${u}/check_verification`});let p=n;function P(e){return Object.keys(e)}function _(e){const t=e.map(i=>[i,""]);return Object.fromEntries(t)}export{p as A,r as R,T as S,_ as a,v as b,P as g,A as r};
